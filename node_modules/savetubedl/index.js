const savetube = require('./ytdl/savetube');
const yts = require('yt-search');

async function ytdl(url, quality = '720') {
    if (!['144', '240', '360', '480', '720', '1080'].includes(quality)) {
        return { status: false, error: "Calidad no v√°lida. Usa '144', '240', '360', '480', '720' o '1080'." };
    }
    return await savetube.download(url, quality);
}

async function ytdltxt(query, quality = '720') {
    const r = await yts(query);
    if (r.videos.length === 0) {
        return { status: false, error: "No se encontraron videos." };
    }
    return await ytdl(r.videos[0].url, quality);
}

async function ytdlaud(url) {
    return await savetube.download(url, 'mp3');
}

async function ytdlaudtxt(query) {
    const r = await yts(query);
    if (r.videos.length === 0) {
        return { status: false, error: "No se encontraron videos." };
    }
    return await ytdlaud(r.videos[0].url);
}

module.exports = {
    ytdl,
    ytdltxt,
    ytdlaud,
    ytdlaudtxt
};